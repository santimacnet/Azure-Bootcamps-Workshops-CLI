**PRACTICA COMANDOS BASICOS KUBECTL y CREACION AKS**
------------------------------------------------------------------

Tutorial didáctico con fines de demostración y formacion.

Para este tutorial es necesario tener los siguientes requerimientos:
- saber utilizar shell.azure.com y Azure CLI
- saber utilizar Kubectl para trabajar con Kubernetes
- BASADO EN TUTORIALES Y BOOTCAMP GOOGLE

### Configurar AKS y acceso para kubectl 

Abrir una shell de Azure para consultar suscripcion correcta
```
$ az account list
$ az account set --subscription ****-****-***-***

$ az group create --name rg-aks-workshop-lab --location westeurope
$ az ad sp create-for-rbac --skip-assignment --name AKSClusterWorkshopLabServicePrincipal
$ az aks create --resource-group rg-aks-workshop-lab \
    --name aks-santi-cluster-pruebas \
    --location westeurope \
    --enable-addons monitoring \
    --generate-ssh-keys \
    --vm-set-type VirtualMachineScaleSets \
    --enable-cluster-autoscaler \
    --min-count 1 \
    --max-count 3 \
    --service-principal <appId> \
    --client-secret <password>

$ az aks get-credentials --resource-group rg-aks-workshop-lab --name <nombre-aks> --admin
```

### Practicando NAMESPACES

Desde la shell de Azure creamos los siguientes namespaces.

```
# creamos los namespaces para la practica
$ kubectl create namespace env-dev
$ kubectl create namespace env-qa
$ kubectl create namespace env-prod

$ kubectl get namespaces

# creamos los pods para la practica (si no indicamos nada namespace=default)
$ kubectl run nginx --image=nginx  
$ kubectl run nginx --image=nginx --namespace env-dev
$ kubectl run nginx --image=nginx --namespace env-qa
$ kubectl run nginx --image=nginx --namespace env-prod

# saber donde estan desplegados los pods 
$ kubectl get pods --all-namespaces
$ kubectl get pods --namespace env-dev

# describir pods desplegados
$ kubectl describe pod nginx --namespace env-dev

# conectando al pod mediante port-forwarding (navegar en localhost:9090)
$ kubectl port-forward nginx-7bb7cd8db5-jk7cd 9090:80 --namespace env-dev
```


